<!DOCTYPE html>
<html>
    <head>
        <title>Capture Photo</title>
        
        <meta charset="utf-8" />

        <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
        <link href="styles/main.css" rel="stylesheet" />
        
        <script src="cordova.js"></script>
        <script src="kendo/js/jquery.min.js"></script>
        <script src="kendo/js/kendo.mobile.min.js"></script>
        <script src="Canvas2ImagePlugin.js"></script>
        <script src="scripts/libraries/megapix-image.js" type="text/javascript"></script>
        <script src="scripts/libraries/underscore.js" type="text/javascript"></script>
        <script src="scripts/app.js" type="text/javascript"></script>
        <meta charset="UTF-8" />
    </head>

    <body>
        <section data-role="layout" data-id="default">
            <!--View content will render here-->
        </section>
        <div id="canvasForm" data-role="view" data-title="Canvas2Image Demo" data-init="app.viewModels.photo.init" data-layout="default" data-model="app.viewModels.photo">
            <header data-role="header">
                <div data-role="navbar">
                    C-2-I Demo
                    <a id="savePic" class="nav-button" data-align="right" data-role="button" data-bind="click: saveCanvasToImage">Save...</a>
                </div>
            </header>
            <ul data-role="listview" data-style="inset">
                <li style="display: none">
                    <input value="Browse" type="file" data-bind="events: { change: onPicSet }" id="photo" />
                </li>
                <li data-bind="invisible: picSelected"><a data-bind="click: onAddPic">Select an Image</a></li>
                <li id="picName" data-bind="visible: picSelected"><div data-bind="html: picName" class="values"></div><a data-role="detailbutton" data-style="rowdelete" data-bind="click: onRemovePic"></a></li>
                <li>
                    <label>Caption
                        <input id="caption" type="text" name="caption" placeholder="caption" data-value-update="keyup" data-bind="value: caption, events: { change: drawImage, keydown: debouncedDrawImage, keyup: debouncedDrawImage }"/>
                    </label>
                </li>
                <li>
                    <label>Text Color
                        <select id="color" data-bind="value: textColor, events: { change: drawImage }">
                            <option>black</option>
                            <option>white</option>
                            <option>blue</option>
                            <option>green</option>
                            <option>red</option>
                        </select>
                    </label>
                </li>
                <li style="display: none">
                    <div style="text-align:center; width:100%; margin-left:auto; margin-right: auto;">
                        <canvas id="canvas" width="640" height="480" style="border:1px solid #ccc"></canvas>
                    </div>
                </li>
            </ul>
            
            <div style="text-align:center; width:100%; margin-left:auto; margin-right: auto;">
                <h4>Preview:</h4>
                <img style="border:1pt solid black; width:100%;" id="preview" data-bind="attr: { src: previewSrc }, visible: picSelected" />
            </div>
            
        </div>
    </body>
</html>
